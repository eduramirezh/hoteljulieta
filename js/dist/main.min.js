! function(a, b, c) {
  function e(c) {
    var e = b.console;
    d[c] || (d[c] = !0, a.migrateWarnings.push(c), e && e.warn && !a.migrateMute && (e.warn("JQMIGRATE: " + c), a.migrateTrace && e.trace && e.trace()))
  }

  function f(b, c, d, f) {
    if (Object.defineProperty) try {
      return Object.defineProperty(b, c, {
        configurable: !0,
        enumerable: !0,
        get: function() {
          return e(f), d
        },
        set: function(a) {
          e(f), d = a
        }
      }), void 0
    } catch (g) {}
    a._definePropertyBroken = !0, b[c] = d
  }
  var d = {};
  a.migrateWarnings = [], !a.migrateMute && b.console && b.console.log && b.console.log("JQMIGRATE: Logging is active"), a.migrateTrace === c && (a.migrateTrace = !0), a.migrateReset = function() {
    d = {}, a.migrateWarnings.length = 0
  }, "BackCompat" === document.compatMode && e("jQuery is not compatible with Quirks Mode");
  var g = a("<input/>", {
    size: 1
  }).attr("size") && a.attrFn,
  h = a.attr,
    i = a.attrHooks.value && a.attrHooks.value.get || function() {
    return null
  }, j = a.attrHooks.value && a.attrHooks.value.set || function() {
    return c
  }, k = /^(?:input|button)$/i,
    l = /^[238]$/,
    m = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
    n = /^(?:checked|selected)$/i;
    f(a, "attrFn", g || {}, "jQuery.attrFn is deprecated"), a.attr = function(b, d, f, i) {
      var j = d.toLowerCase(),
        o = b && b.nodeType;
      return i && (h.length < 4 && e("jQuery.fn.attr( props, pass ) is deprecated"), b && !l.test(o) && (g ? d in g : a.isFunction(a.fn[d]))) ? a(b)[d](f) : ("type" === d && f !== c && k.test(b.nodeName) && b.parentNode && e("Can't change the 'type' of an input or button in IE 6/7/8"), !a.attrHooks[j] && m.test(j) && (a.attrHooks[j] = {
        get: function(b, d) {
          var e, f = a.prop(b, d);
          return f === !0 || "boolean" != typeof f && (e = b.getAttributeNode(d)) && e.nodeValue !== !1 ? d.toLowerCase() : c
        },
        set: function(b, c, d) {
          var e;
          return c === !1 ? a.removeAttr(b, d) : (e = a.propFix[d] || d, e in b && (b[e] = !0), b.setAttribute(d, d.toLowerCase())), d
        }
      }, n.test(j) && e("jQuery.fn.attr('" + j + "') may use property instead of attribute")), h.call(a, b, d, f))
    }, a.attrHooks.value = {
      get: function(a, b) {
        var c = (a.nodeName || "").toLowerCase();
        return "button" === c ? i.apply(this, arguments) : ("input" !== c && "option" !== c && e("jQuery.fn.attr('value') no longer gets properties"), b in a ? a.value : null)
      },
      set: function(a, b) {
        var c = (a.nodeName || "").toLowerCase();
        return "button" === c ? j.apply(this, arguments) : ("input" !== c && "option" !== c && e("jQuery.fn.attr('value', val) no longer sets properties"), a.value = b, void 0)
      }
    };
    var o, p, q = a.fn.init,
      r = a.parseJSON,
      s = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
      a.fn.init = function(b, c, d) {
        var f;
        return b && "string" == typeof b && !a.isPlainObject(c) && (f = s.exec(a.trim(b))) && f[0] && ("<" !== b.charAt(0) && e("$(html) HTML strings must start with '<' character"), f[3] && e("$(html) HTML text after last tag is ignored"), "#" === f[0].charAt(0) && (e("HTML string cannot start with a '#' character"), a.error("JQMIGRATE: Invalid selector string (XSS)")), c && c.context && (c = c.context), a.parseHTML) ? q.call(this, a.parseHTML(f[2], c, !0), c, d) : q.apply(this, arguments)
      }, a.fn.init.prototype = a.fn, a.parseJSON = function(a) {
        return a || null === a ? r.apply(this, arguments) : (e("jQuery.parseJSON requires a valid JSON string"), null)
      }, a.uaMatch = function(a) {
        a = a.toLowerCase();
        var b = /(chrome)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];
        return {
          browser: b[1] || "",
          version: b[2] || "0"
        }
      }, a.browser || (o = a.uaMatch(navigator.userAgent), p = {}, o.browser && (p[o.browser] = !0, p.version = o.version), p.chrome ? p.webkit = !0 : p.webkit && (p.safari = !0), a.browser = p), f(a, "browser", a.browser, "jQuery.browser is deprecated"), a.sub = function() {
        function b(a, c) {
          return new b.fn.init(a, c)
        }
        a.extend(!0, b, this), b.superclass = this, b.fn = b.prototype = this(), b.fn.constructor = b, b.sub = this.sub, b.fn.init = function(d, e) {
          return e && e instanceof a && !(e instanceof b) && (e = b(e)), a.fn.init.call(this, d, e, c)
        }, b.fn.init.prototype = b.fn;
        var c = b(document);
        return e("jQuery.sub() is deprecated"), b
      }, a.ajaxSetup({
        converters: {
          "text json": a.parseJSON
        }
      });
      var t = a.fn.data;
      a.fn.data = function(b) {
        var d, f, g = this[0];
        return !g || "events" !== b || 1 !== arguments.length || (d = a.data(g, b), f = a._data(g, b), d !== c && d !== f || f === c) ? t.apply(this, arguments) : (e("Use of jQuery.fn.data('events') is deprecated"), f)
      };
      var u = /\/(java|ecma)script/i,
        v = a.fn.andSelf || a.fn.addBack;
      a.fn.andSelf = function() {
        return e("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"), v.apply(this, arguments)
      }, a.clean || (a.clean = function(b, c, d, f) {
        c = c || document, c = !c.nodeType && c[0] || c, c = c.ownerDocument || c, e("jQuery.clean() is deprecated");
        var g, h, i, j, k = [];
        if (a.merge(k, a.buildFragment(b, c).childNodes), d)
          for (i = function(a) {
            return !a.type || u.test(a.type) ? f ? f.push(a.parentNode ? a.parentNode.removeChild(a) : a) : d.appendChild(a) : void 0
          }, g = 0; null != (h = k[g]); g++) a.nodeName(h, "script") && i(h) || (d.appendChild(h), "undefined" != typeof h.getElementsByTagName && (j = a.grep(a.merge([], h.getElementsByTagName("script")), i), k.splice.apply(k, [g + 1, 0].concat(j)), g += j.length));
          return k
      });
      var w = a.event.add,
        x = a.event.remove,
        y = a.event.trigger,
        z = a.fn.toggle,
        A = a.fn.live,
        B = a.fn.die,
        C = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",
        D = new RegExp("\\b(?:" + C + ")\\b"),
        E = /(?:^|\s)hover(\.\S+|)\b/,
        F = function(b) {
        return "string" != typeof b || a.event.special.hover ? b : (E.test(b) && e("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"), b && b.replace(E, "mouseenter$1 mouseleave$1"))
      };
      a.event.props && "attrChange" !== a.event.props[0] && a.event.props.unshift("attrChange", "attrName", "relatedNode", "srcElement"), a.event.dispatch && f(a.event, "handle", a.event.dispatch, "jQuery.event.handle is undocumented and deprecated"), a.event.add = function(a, b, c, d, f) {
        a !== document && D.test(b) && e("AJAX events should be attached to document: " + b), w.call(this, a, F(b || ""), c, d, f)
      }, a.event.remove = function(a, b, c, d, e) {
        x.call(this, a, F(b) || "", c, d, e)
      }, a.fn.error = function() {
        var a = Array.prototype.slice.call(arguments, 0);
        return e("jQuery.fn.error() is deprecated"), a.splice(0, 0, "error"), arguments.length ? this.bind.apply(this, a) : (this.triggerHandler.apply(this, a), this)
      }, a.fn.toggle = function(b, c) {
        if (!a.isFunction(b) || !a.isFunction(c)) return z.apply(this, arguments);
        e("jQuery.fn.toggle(handler, handler...) is deprecated");
        var d = arguments,
          f = b.guid || a.guid++,
          g = 0,
          h = function(c) {
          var e = (a._data(this, "lastToggle" + b.guid) || 0) % g;
          return a._data(this, "lastToggle" + b.guid, e + 1), c.preventDefault(), d[e].apply(this, arguments) || !1
        };
        for (h.guid = f; g < d.length;) d[g++].guid = f;
        return this.click(h)
      }, a.fn.live = function(b, c, d) {
        return e("jQuery.fn.live() is deprecated"), A ? A.apply(this, arguments) : (a(this.context).on(b, this.selector, c, d), this)
      }, a.fn.die = function(b, c) {
        return e("jQuery.fn.die() is deprecated"), B ? B.apply(this, arguments) : (a(this.context).off(b, this.selector || "**", c), this)
      }, a.event.trigger = function(a, b, c, d) {
        return c || D.test(a) || e("Global events are undocumented and deprecated"), y.call(this, a, b, c || document, d)
      }, a.each(C.split("|"), function(b, c) {
        a.event.special[c] = {
          setup: function() {
            var b = this;
            return b !== document && (a.event.add(document, c + "." + a.guid, function() {
              a.event.trigger(c, null, b, !0)
            }), a._data(this, c, a.guid++)), !1
          },
          teardown: function() {
            return this !== document && a.event.remove(document, c + "." + a._data(this, c)), !1
          }
        }
      })
}(jQuery, window);
var ImprovedNoise = function() {
  function c(a) {
    return a * a * a * (a * (6 * a - 15) + 10)
  }

  function d(a, b, c) {
    return b + a * (c - b)
  }

  function e(a, b, c, d) {
    var e = 15 & a,
      f = 8 > e ? b : c,
      g = 4 > e ? c : 12 == e || 14 == e ? b : d;
    return (0 == (1 & e) ? f : -f) + (0 == (2 & e) ? g : -g)
  }
  for (var a = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180], b = 0; 256 > b; b++) a[256 + b] = a[b];
  return {
    noise: function(b, f, g) {
      var h = ~~b,
        i = ~~f,
        j = ~~g,
        k = 255 & h,
        l = 255 & i,
        m = 255 & j;
      b -= h, f -= i, g -= j;
      var n = b - 1,
        o = f - 1,
        p = g - 1,
        q = c(b),
        r = c(f),
        s = c(g),
        t = a[k] + l,
        u = a[t] + m,
        v = a[t + 1] + m,
        w = a[k + 1] + l,
        x = a[w] + m,
        y = a[w + 1] + m;
      return d(s, d(r, d(q, e(a[u], b, f, g), e(a[x], n, f, g)), d(q, e(a[v], b, o, g), e(a[y], n, o, g))), d(r, d(q, e(a[u + 1], b, f, p), e(a[x + 1], n, f, g - 1)), d(q, e(a[v + 1], b, o, p), e(a[y + 1], n, o, p))))
    }
  }
}, FixieMask = function() {
  this.masks = [], this.add = function(a) {
    a.$el.css("position", "fixed"), h(a), b.masks.push(a), f()
  };
  var b = this,
    c = $(window),
    e = (c.height(), function() {
    c.on("scroll", f), c.on("resize", g)
  }),
  f = function() {
    var a = 0,
      d = b.masks.length,
      e = 0;
    for (a = 0; d > a; a++) e = b.masks[a].$container.offset().top - c.scrollTop() - b.masks[a].top, botClip = e + b.masks[a].height, b.masks[a].$el.css("clip", "rect(" + e + "px, auto, " + botClip + "px, 0)")
  }, g = function() {
    var a = 0,
      c = b.masks.length;
    for (a = 0; c > a; a++) h(b.masks[a]);
    f()
  }, h = function(a) {
    a.top = a.$el.offset().top - c.scrollTop(), a.height = a.$container.height()
  };
  return e(), this
}, fixieMasks = function() {
  if (!("ontouchstart" in window)) {
    var a = $(".FixieMask li"),
      b = a.find(".mask");
    if (!a.length) return !1;
    fixieMask = FixieMask(), b.each(function(b) {
      fixieMask.add({
        $el: $(this),
        $container: a.eq(b)
      })
    })
  }
}, LoopVisualizer = function(a, b, c) {
  function u() {
    r = new Uint8Array(a.frequencyBinCount), s = new Uint8Array(a.frequencyBinCount);
    var b = new THREE.Shape;
    b.absarc(0, 0, f, 0, 2 * Math.PI, !1), q = b.createPointsGeometry(g / 2), q.dynamic = !0, c.add(p);
    for (var e = 1, h = 0; d > h; h++) {
      var i = new THREE.LineBasicMaterial({
        color: 16777215,
        linewidth: 1,
        opacity: .7,
        blending: THREE.AdditiveBlending,
        depthTest: !1,
        transparent: !0
      }),
      j = new THREE.Line(q, i);
      m.push(j), e *= 1.05, j.scale.x = e, j.scale.y = e, p.add(j), n.push(0), o.push(0)
    }
    v()
  }

  function v() {
    p.scale.x = p.scale.y = t.scale;
    for (var a = 1, b = 0; d > b; b++) {
      var c = m[b];
      c.scale.x = a, c.scale.y = a, a *= 1 + t.separation
    }
  }

  function w() {
    a.getByteFrequencyData(r), a.getByteTimeDomainData(s);
    for (var c = 0, e = 0; h > e; e++) c += r[e];
    var f = c / h,
      p = 2 * f / 256 * t.gain;
    n.push(p), n.shift(1);
    var u = Math.abs(b.noise(PHNTM.noisePosition, 0, 0));
    o.push(u), o.shift(1);
    for (var v = 0; g > v; v++) q.vertices[v].z = 2 * s[v];
    for (q.vertices[g].z = q.vertices[0].z, q.verticesNeedUpdate = !0, e = 0; d > e; e++) {
      var w = d - e - 1,
        x = n[w] + .01;
      m[e].material.linewidth = x / l * x * k, m[e].material.opacity = x, m[e].scale.z = Math.min(j, x * t.zbounce + i), m[e].rotation.z = .6 * x * e
    }
  }
  var q, r, s, d = 20,
    f = 300,
    g = 512,
    h = 512,
    i = .3,
    j = .7,
    k = 6,
    l = 3,
    m = [],
    n = [],
    o = [],
    p = new THREE.Object3D,
    t = {
    gain: 1,
    separation: .02,
    scale: 2,
    zbounce: .5,
    autoTilt: !1
  };
  return {
    init: u,
    update: w,
    loopHolder: p,
    vizParams: t
  }
};
! function() {
  var a = [].indexOf || function(a) {
    for (var b = 0, c = this.length; c > b; b++)
    if (b in this && this[b] === a) return b;
    return -1
  }, b = [].slice;
  ! function(a, b) {
    return "function" == typeof define && define.amd ? define("waypoints", ["jquery"], function(c) {
      return b(c, a)
    }) : b(a.jQuery, a)
  }(window, function(c, d) {
    var e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t;
    return e = c(d), l = a.call(d, "ontouchstart") >= 0, h = {
      horizontal: {},
      vertical: {}
    }, i = 1, k = {}, j = "waypoints-context-id", o = "resize.waypoints", p = "scroll.waypoints", q = 1, r = "waypoints-waypoint-ids", s = "waypoint", t = "waypoints", f = function() {
      function a(a) {
        var b = this;
        this.$element = a, this.element = a[0], this.didResize = !1, this.didScroll = !1, this.id = "context" + i++, this.oldScroll = {
          x: a.scrollLeft(),
          y: a.scrollTop()
        }, this.waypoints = {
          horizontal: {},
          vertical: {}
        }, this.element[j] = this.id, k[this.id] = this, a.bind(p, function() {
          var a;
          return b.didScroll || l ? void 0 : (b.didScroll = !0, a = function() {
            return b.doScroll(), b.didScroll = !1
          }, d.setTimeout(a, c[t].settings.scrollThrottle))
        }), a.bind(o, function() {
          var a;
          return b.didResize ? void 0 : (b.didResize = !0, a = function() {
            return c[t]("refresh"), b.didResize = !1
          }, d.setTimeout(a, c[t].settings.resizeThrottle))
        })
      }
      return a.prototype.doScroll = function() {
        var a, b = this;
        return a = {
          horizontal: {
            newScroll: this.$element.scrollLeft(),
            oldScroll: this.oldScroll.x,
            forward: "right",
            backward: "left"
          },
          vertical: {
            newScroll: this.$element.scrollTop(),
            oldScroll: this.oldScroll.y,
            forward: "down",
            backward: "up"
          }
        }, !l || a.vertical.oldScroll && a.vertical.newScroll || c[t]("refresh"), c.each(a, function(a, d) {
          var e, f, g;
          return g = [], f = d.newScroll > d.oldScroll, e = f ? d.forward : d.backward, c.each(b.waypoints[a], function(a, b) {
            var c, e;
            return d.oldScroll < (c = b.offset) && c <= d.newScroll ? g.push(b) : d.newScroll < (e = b.offset) && e <= d.oldScroll ? g.push(b) : void 0
          }), g.sort(function(a, b) {
            return a.offset - b.offset
          }), f || g.reverse(), c.each(g, function(a, b) {
            return b.options.continuous || a === g.length - 1 ? b.trigger([e]) : void 0
          })
        }), this.oldScroll = {
          x: a.horizontal.newScroll,
          y: a.vertical.newScroll
        }
      }, a.prototype.refresh = function() {
        var a, b, d, e = this;
        return d = c.isWindow(this.element), b = this.$element.offset(), this.doScroll(), a = {
          horizontal: {
            contextOffset: d ? 0 : b.left,
            contextScroll: d ? 0 : this.oldScroll.x,
            contextDimension: this.$element.width(),
            oldScroll: this.oldScroll.x,
            forward: "right",
            backward: "left",
            offsetProp: "left"
          },
          vertical: {
            contextOffset: d ? 0 : b.top,
            contextScroll: d ? 0 : this.oldScroll.y,
            contextDimension: d ? c[t]("viewportHeight") : this.$element.height(),
            oldScroll: this.oldScroll.y,
            forward: "down",
            backward: "up",
            offsetProp: "top"
          }
        }, c.each(a, function(a, b) {
          return c.each(e.waypoints[a], function(a, d) {
            var e, f, g, h, i;
            return e = d.options.offset, g = d.offset, f = c.isWindow(d.element) ? 0 : d.$element.offset()[b.offsetProp], c.isFunction(e) ? e = e.apply(d.element) : "string" == typeof e && (e = parseFloat(e), d.options.offset.indexOf("%") > -1 && (e = Math.ceil(b.contextDimension * e / 100))), d.offset = f - b.contextOffset + b.contextScroll - e, d.options.onlyOnScroll && null != g || !d.enabled ? void 0 : null !== g && g < (h = b.oldScroll) && h <= d.offset ? d.trigger([b.backward]) : null !== g && g > (i = b.oldScroll) && i >= d.offset ? d.trigger([b.forward]) : null === g && b.oldScroll >= d.offset ? d.trigger([b.forward]) : void 0
          })
        })
      }, a.prototype.checkEmpty = function() {
        return c.isEmptyObject(this.waypoints.horizontal) && c.isEmptyObject(this.waypoints.vertical) ? (this.$element.unbind([o, p].join(" ")), delete k[this.id]) : void 0
      }, a
    }(), g = function() {
      function a(a, b, d) {
        var e, f;
        "bottom-in-view" === d.offset && (d.offset = function() {
          var a;
          return a = c[t]("viewportHeight"), c.isWindow(b.element) || (a = b.$element.height()), a - c(this).outerHeight()
        }), this.$element = a, this.element = a[0], this.axis = d.horizontal ? "horizontal" : "vertical", this.callback = d.handler, this.context = b, this.enabled = d.enabled, this.id = "waypoints" + q++, this.offset = null, this.options = d, b.waypoints[this.axis][this.id] = this, h[this.axis][this.id] = this, e = null != (f = this.element[r]) ? f : [], e.push(this.id), this.element[r] = e
      }
      return a.prototype.trigger = function(a) {
        return this.enabled ? (null != this.callback && this.callback.apply(this.element, a), this.options.triggerOnce ? this.destroy() : void 0) : void 0
      }, a.prototype.disable = function() {
        return this.enabled = !1
      }, a.prototype.enable = function() {
        return this.context.refresh(), this.enabled = !0
      }, a.prototype.destroy = function() {
        return delete h[this.axis][this.id], delete this.context.waypoints[this.axis][this.id], this.context.checkEmpty()
      }, a.getWaypointsByElement = function(a) {
        var b, d;
        return (d = a[r]) ? (b = c.extend({}, h.horizontal, h.vertical), c.map(d, function(a) {
          return b[a]
        })) : []
      }, a
    }(), n = {
      init: function(a, b) {
        var d;
        return b = c.extend({}, c.fn[s].defaults, b), null == (d = b.handler) && (b.handler = a), this.each(function() {
          var a, d, e, h;
          return a = c(this), e = null != (h = b.context) ? h : c.fn[s].defaults.context, c.isWindow(e) || (e = a.closest(e)), e = c(e), d = k[e[0][j]], d || (d = new f(e)), new g(a, d, b)
        }), c[t]("refresh"), this
      },
      disable: function() {
        return n._invoke.call(this, "disable")
      },
      enable: function() {
        return n._invoke.call(this, "enable")
      },
      destroy: function() {
        return n._invoke.call(this, "destroy")
      },
      prev: function(a, b) {
        return n._traverse.call(this, a, b, function(a, b, c) {
          return b > 0 ? a.push(c[b - 1]) : void 0
        })
      },
      next: function(a, b) {
        return n._traverse.call(this, a, b, function(a, b, c) {
          return b < c.length - 1 ? a.push(c[b + 1]) : void 0
        })
      },
      _traverse: function(a, b, e) {
        var f, g;
        return null == a && (a = "vertical"), null == b && (b = d), g = m.aggregate(b), f = [], this.each(function() {
          var b;
          return b = c.inArray(this, g[a]), e(f, b, g[a])
        }), this.pushStack(f)
      },
      _invoke: function(a) {
        return this.each(function() {
          var b;
          return b = g.getWaypointsByElement(this), c.each(b, function(b, c) {
            return c[a](), !0
          })
        }), this
      }
    }, c.fn[s] = function() {
      var a, d;
      return d = arguments[0], a = 2 <= arguments.length ? b.call(arguments, 1) : [], n[d] ? n[d].apply(this, a) : c.isFunction(d) ? n.init.apply(this, arguments) : c.isPlainObject(d) ? n.init.apply(this, [null, d]) : d ? c.error("The " + d + " method does not exist in jQuery Waypoints.") : c.error("jQuery Waypoints needs a callback function or handler option.")
    }, c.fn[s].defaults = {
      context: d,
      continuous: !0,
      enabled: !0,
      horizontal: !1,
      offset: 0,
      triggerOnce: !1
    }, m = {
      refresh: function() {
        return c.each(k, function(a, b) {
          return b.refresh()
        })
      },
      viewportHeight: function() {
        var a;
        return null != (a = d.innerHeight) ? a : e.height()
      },
      aggregate: function(a) {
        var b, d, e;
        return b = h, a && (b = null != (e = k[c(a)[0][j]]) ? e.waypoints : void 0), b ? (d = {
          horizontal: [],
          vertical: []
        }, c.each(d, function(a, e) {
          return c.each(b[a], function(a, b) {
            return e.push(b)
          }), e.sort(function(a, b) {
            return a.offset - b.offset
          }), d[a] = c.map(e, function(a) {
            return a.element
          }), d[a] = c.unique(d[a])
        }), d) : []
      },
      above: function(a) {
        return null == a && (a = d), m._filter(a, "vertical", function(a, b) {
          return b.offset <= a.oldScroll.y
        })
      },
      below: function(a) {
        return null == a && (a = d), m._filter(a, "vertical", function(a, b) {
          return b.offset > a.oldScroll.y
        })
      },
      left: function(a) {
        return null == a && (a = d), m._filter(a, "horizontal", function(a, b) {
          return b.offset <= a.oldScroll.x
        })
      },
      right: function(a) {
        return null == a && (a = d), m._filter(a, "horizontal", function(a, b) {
          return b.offset > a.oldScroll.x
        })
      },
      enable: function() {
        return m._invoke("enable")
      },
      disable: function() {
        return m._invoke("disable")
      },
      destroy: function() {
        return m._invoke("destroy")
      },
      extendFn: function(a, b) {
        return n[a] = b
      },
      _invoke: function(a) {
        var b;
        return b = c.extend({}, h.vertical, h.horizontal), c.each(b, function(b, c) {
          return c[a](), !0
        })
      },
      _filter: function(a, b, d) {
        var e, f;
        return (e = k[c(a)[0][j]]) ? (f = [], c.each(e.waypoints[b], function(a, b) {
          return d(e, b) ? f.push(b) : void 0
        }), f.sort(function(a, b) {
          return a.offset - b.offset
        }), c.map(f, function(a) {
          return a.element
        })) : []
      }
    }, c[t] = function() {
      var a, c;
      return c = arguments[0], a = 2 <= arguments.length ? b.call(arguments, 1) : [], m[c] ? m[c].apply(null, a) : m.aggregate.call(null, c)
    }, c[t].settings = {
      resizeThrottle: 100,
      scrollThrottle: 30
    }, e.on("load.waypoints", function() {
      return c[t]("refresh")
    })
  })
}.call(this);
var PHNTM = PHNTM || {};
PHNTM.noisePosition = 0,
  function(a) {
  var d, e, f, g, h, i, j, k, l, n, b = 0,
    c = 0,
    m = !1,
    o = a("#playback-control"),
    p = !1,
    q = !0,
    r = 0,
    s = 0,
    t = 0,
    u = a(".single .centered-circle img, #next-gig .centered-circle img");
  a(".letter");
  var C, x = !! a.browser.safari,
    y = !1,
    z = !1,
    A = !1,
    B = null != navigator.userAgent.match(/iPad/i),
    D = {
    pbPause: "playback-pause",
    pbPlay: "playback-play"
  }, E = 0,
    F = {}, G = ["audio/LUNA_SOL.mp3", "audio/LUNA_SOL.mp3", "audio/03-emergency.mp3", "audio/IMAGENES.mp3", "audio/05-last-orders.mp3", "audio/06-ban-all-the-music.mp3"],
    H = function() {
    z = U(), p = !z && T(), A = V(), y = W();
    try {
      window.AudioContext = window.AudioContext || window.webkitAudioContext, j = new window.AudioContext
    } catch (b) {
      I("This browser does not support the Web Audio API."), q = !1, a("#tracks").hide()
    }
    if (window.addEventListener && window.addEventListener("touchstart", function() {
      var a = j.createBuffer(1, 1, 22050),
        b = j.createBufferSource();
      b.buffer = a, b.connect(j.destination), b.noteOn(0)
    }, !1), y ? (o.hide(), a("html").addClass("no-webgl"), a("#loading").hide()) : p && q || (o.hide(), a("#loading").hide()), q && (h = j.createAnalyser(), h.smoothingTimeConstant = .1, h.fftSize = 1024), document.createElement("SVG").getAttributeNS || a("#logo-img").attr("src", "images/nbt-logo.png"), p && q && !y && !z) {
      var c = new ImprovedNoise;
      PHNTM.noisePosition = 100 * Math.random(), g = document.getElementById("output"), d = new THREE.PerspectiveCamera(60, 1, 1, 1e6), d.position.z = 2e3, e = new THREE.Scene, e.add(d), f = new THREE.WebGLRenderer({
        antialias: !1,
        sortObjects: !1
      }), f.setClearColor(2103579, 1), f.setSize(500, 500), g.appendChild(f.domElement), n = LoopVisualizer(h, c, e), n.init()
    } else a("html").addClass("no-webgl"), a("#loading").hide(), I("This browser does not support WebGL.");
    document.onselectStart = function() {
      return !1
    }, a(".mobile-track").click(function(b) {
      b.stopPropagation(), b.preventDefault(), a(this).hasClass("active") ? a(this).hasClass("playing") ? (K(), a(this).removeClass("playing").addClass("paused")) : a(this).hasClass("paused") && (L(), a(this).removeClass("paused").addClass("playing")) : O(a(this).data().track), k && l && (k.gain.linearRampToValueAtTime(0, j.currentTime + 1), l.stop(j.currentTime + 1))
    }), a(".track").click(function(b) {
      b.stopPropagation(), b.preventDefault(), o.removeClass(D.pbPlay).addClass(D.pbPause), O(a(this).data().track), k && l && (k.gain.linearRampToValueAtTime(0, j.currentTime + 1), l.stop(j.currentTime + 1))
    }), a("#playback-control").click(function() {
      o.hasClass(D.pbPause) ? (K(), o.removeClass(D.pbPause).addClass(D.pbPlay)) : a(this).hasClass(D.pbPlay) && (L(), o.removeClass(D.pbPlay).addClass(D.pbPause))
    }), a(".video-button").click(function() {
      var c = a(this).data().videoId,
        d = a('.video-player[data-video-id="' + c + '"]');
      !y && o.hasClass(D.pbPause) && (K(), o.removeClass(D.pbPause).addClass(D.pbPlay));
      var e = '<iframe src="http://www.youtube.com/embed/' + c + '/?autoplay=1&autohide=1&controls=1&showinfo=0"' + ' frameborder="0" allowfullscreen>';
      a("#close-video-div").show(), d.html(e).show()
    }), a("#close-video-button").click(function() {
      a(".video-player").hide().empty(), a("#close-video-div").hide()
    }), fixieMasks(), z ? a("nav .subnav").attr("style", "display: none !important;") : a("#single-itch").waypoint(function(b) {
      "down" === b && a(".nav-wrapper nav ul:not(.subnav)").fadeIn(300)
    }, {
      offset: "10%"
    }).waypoint(function(b) {
      "up" === b && a(".nav-wrapper nav ul:not(.subnav)").fadeOut(300)
    }, {
      offset: "90%"
    }), a("#tracklist-show").click(function() {
      a("#mobile-tracks").show()
    }), a("#tracklist-hide").click(function() {
      a("#mobile-tracks").hide()
    }), a("#single-itch").waypoint(function(b) {
      "down" === b && a(".nav-wrapper").addClass("nav-wrapper-dark")
    }, {
      offset: "10%"
    }).waypoint(function(b) {
      "up" === b && a(".nav-wrapper").removeClass("nav-wrapper-dark")
    }, {
      offset: "10%"
    }), a("#single-wakeup").waypoint(function(b) {
      "down" === b && a(".nav-wrapper").removeClass("nav-wrapper-dark")
    }, {
      offset: "10%"
    }).waypoint(function(b) {
      "up" === b && a(".nav-wrapper").addClass("nav-wrapper-dark")
    }, {
      offset: "10%"
    }), a("#upcoming-gigs").waypoint(function(b) {
      "down" === b && a(".nav-wrapper").addClass("nav-wrapper-gigs")
    }, {
      offset: "10%"
    }).waypoint(function(b) {
      "up" === b && a(".nav-wrapper").removeClass("nav-wrapper-gigs")
    }, {
      offset: "10%"
    }), a(".nav-wrapper a").not(".merch").click(function(b) {
      console.log("should trigger for merch"), b.preventDefault(), b.stopPropagation();
      var c;
      c = "#social" === a(this).attr("href") ? a(document).height() : a(a(this).attr("href")).offset().top, a("html, body").animate({
        scrollTop: c
      }, 500)
    }), a("#arrow-scroll").click(function() {
      a('a[href="#single-itch"]').trigger("click")
    }), A ? a("#tracks").removeClass("hidden") : a(document).mousemove(M), a(document).scroll(N), z || y || B ? B && (o.removeClass(D.pbPause).addClass(D.pbPlay), a("#loading").hide(), a("html").addClass("pre-play")) : O(4), J(), (x || -1 !== navigator.appVersion.indexOf("MSIE 8.")) && a("body").addClass("safari-ie8")
  }, I = function(a) {
    window.console && console.warn(a)
  }, J = function() {
    var b = new Date;
    b.setHours(0, 0, 0, 0);
    var d, e, c = a(".upcoming-gig-details");
    if (c.each(function() {
      if (y) {
        var h, c = a(this).attr("data-gig-date").substring(0, 10),
          f = /^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,
          g = new Date(0 / 0),
          i = f.exec(c);
        i && (h = +i[2], g.setFullYear(i[1], h - 1, i[3]), h != g.getMonth() + 1 && g.setTime(0 / 0)), e = g
      } else e = new Date(a(this).data().gigDate); if (e.setHours(0, 0, 0, 0), b > e) a(this).addClass("gig-not-available"), a(this).parent().addClass("gig-not-available").click(function() {
        return !1
      });
      else if (e >= b) return d = a(this), !1
    }), void 0 !== d) {
      var f = d.find(".gig-venue").html(),
        g = d.find(".gig-city").data().shortCity,
        h = d.data().image,
        i = d.find(".gig-date").text(),
        j = d.parent().attr("href"),
        k = d.data().imageCredit,
        l = d.data().imageCreditLink;
      a("#next-gig").css("background-image", "url(" + h + ")"), a(".next-gig-info .gig-venue").html(f), a(".next-gig-info .gig-city").text(g), a(".next-gig-info .gig-date").text(i), a(".next-gig-info .button a").attr("href", j), a(".image-credit").text("Original photo by: " + k), a(".image-credit").attr("href", l)
    }
  }, K = function() {
    l && (l.stop(!0), l.disconnect()), r += j.currentTime - s
  }, L = function() {
    s = j.currentTime, l = j.createBufferSource(), l.connect(j.destination), l.connect(h), k = j.createGain(), l.connect(k), k.connect(j.destination), k.gain.value = 0, l.buffer = i, l.loop = !0, l.start(0, r % i.duration)
  }, M = function() {
    a("#tracks").removeClass("hidden"), clearInterval(t), t = setInterval(function() {
      a("#tracks").addClass("hidden")
    }, 2e3)
  }, N = function() {
    x || z || (E = window.scrollY / 8 % 360, F = {
      transform: "rotate(" + E + "deg)"
    }, u.css(F))
  }, O = function(b) {
    a(".track.active").removeClass("active"), a(".mobile-track.active").removeClass("active"), a(".mobile-track.paused").removeClass("paused"), a(".mobile-track.playing").removeClass("playing"), a('.track[data-track="' + b + '"]').addClass("active"), a('.mobile-track[data-track="' + b + '"]').addClass("active playing"), P(G[b - 1])
  }, P = function(b) {
    void 0 !== C && (C.abort(), C = null), C = new XMLHttpRequest, C.open("GET", b, !0), C.responseType = "arraybuffer", C.onload = function() {
      j.decodeAudioData(C.response, function(b) {
        i = b, Q(), a("html").removeClass("pre-play")
      }, function(a) {
        console.error(a)
      })
    }, C.send()
  }, Q = function() {
    l && (x || l.stop(!0), l.disconnect()), l = j.createBufferSource(), l.connect(j.destination), l.connect(h), k = j.createGain(), l.connect(k), k.connect(j.destination), k.gain.value = 0, l.buffer = i, l.loop = !0, l.start(0), S()
  }, R = function() {
    n.update(), PHNTM.noisePosition += .005;
    var a = 2 * b / 10 / window.innerWidth * Math.PI + Math.PI,
      g = 2 * c / 10 / window.innerHeight * Math.PI + Math.PI,
      h = n.loopHolder.rotation.x,
      i = n.loopHolder.rotation.y;
    n.loopHolder.rotation.x += .3 * (g - h), n.loopHolder.rotation.y += .3 * (-a - i), f.render(e, d)
  }, S = function() {
    a("#loading").hide(), p && (m || (m = !0, PHNTM.Engine.init(), PHNTM.Engine.addRender(R)))
  }, T = function() {
    try {
      var a = document.createElement("canvas"),
        b = window.WebGLRenderingContext;
      return !!b && !! a.getContext("experimental-webgl")
    } catch (c) {
      return !1
    }
  }, U = function() {
    for (var a = [/Android/i, /BlackBerry/i, /iPhone|iPod/i, /Opera Mini/i, /IEMobile/i], b = 0; b < a.length; b++)
    if (null !== navigator.userAgent.match(a[b])) return !0;
    var c = navigator.userAgent;
    return c.indexOf("Mozilla/5.0") > -1 && c.indexOf("Android ") > -1 && c.indexOf("AppleWebKit") > -1 ? !0 : !1
  }, V = function() {
    var a = document.createElement("div");
    return a.setAttribute("ontouchstart", "return;"), "function" == typeof a.ontouchstart
  }, W = function() {
    return -1 != navigator.userAgent.indexOf("MSIE") || !! navigator.userAgent.match(/Trident.*rv[ :]*11\./)
  };
  H()
}(jQuery),
function() {
  for (var a = 0, b = ["webkit", "moz"], c = 0; c < b.length && !window.requestAnimationFrame; ++c) window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
  window.requestAnimationFrame || (window.requestAnimationFrame = function(b) {
    var d = (new Date).getTime(),
      e = Math.max(0, 16 - (d - a)),
      f = window.setTimeout(function() {
      b(d + e)
    }, e);
    return a = d + e, f
  }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(a) {
    clearTimeout(a)
  })
}();
var PHNTM = PHNTM || {};
! function(a) {
  a.Engine = {}, a.Engine._paused = !1, a.Engine.ratio = 1, a.Engine._renderCallbacks = [], a.Engine.addRender = function(b) {
    a.Engine._renderCallbacks.push(b)
  }, a.Engine.stop = function() {
    a.Engine._paused = !0
  }, a.Engine.start = function() {
    a.Engine._paused = !1, animLoop()
  }, a.Engine._render = function(b) {
    for (i = a.Engine._renderCallbacks.length; i--;) a.Engine._renderCallbacks[i](b)
  }, a.Engine.init = function() {
    var b = document.createElement("canvas"),
      c = b.getContext("2d"),
      d = window.devicePixelRatio || 1,
      e = c.webkitBackingStorePixelRatio || c.mozBackingStorePixelRatio || c.msBackingStorePixelRatio || c.oBackingStorePixelRatio || c.backingStorePixelRatio || 1;
    a.Engine.ratio = d / e,
      function f() {
      a.Engine._paused || (requestAnimationFrame(f), a.Engine._render(window.performance && performance.now() || Date.now()))
    }()
  }
}(PHNTM);

